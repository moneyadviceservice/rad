<p><%= t('self_service.required_fields_message') %></p>

<div class="t-validation-summary">
  <%= f.validation_summary %>
</div>


<% if f.object.new_record? %>
  <%= f.form_row :reference_number do %>
    <fieldset class="form__group">
      <legend class="l-questionnaire__legend"><%= t('questionnaire.adviser.advisers_details.heading') %></legend>
      <p><%= t('questionnaire.adviser.advisers_details.description') %></p>

      <div class="l-questionnaire__row">
        <div class="l-questionnaire__field">
          <%= f.errors_for :reference_number %>
          <%= f.label :reference_number, t('questionnaire.adviser.advisers_details.label'), class: 'form__label-heading' %>
          <%= f.text_field :reference_number, class: 't-reference-number', maxlength: 8, data: { transform: '', input: '', url: lookup_adviser_path(id: '') } %>
        </div>
      </div>

      <div class="notice is-hidden" data-notice="success"></div>
      <div class="notice notice--error is-hidden" data-notice="error"></div>
    </fieldset>
  <% end %>
<% end %>

<hr>

<section>
  <%= heading_tag(t('questionnaire.adviser.geographical_coverage.heading'), level: 2, class: 'heading-small') %>
  <p class="l-questionnaire__section-description"><%= t('questionnaire.adviser.geographical_coverage.description') %></p>

  <fieldset class="form__group" data-dough-field-target="1">
    <legend class="l-questionnaire__legend"><%= t('questionnaire.adviser.geographical_coverage.adviser_services_postcode') %></legend>
    <%= f.form_row :postcode do %>
      <div>
        <%= f.errors_for :postcode %>
        <%= f.label :postcode, t('questionnaire.adviser.geographical_coverage.postcode'), class: 'form__label-heading' %>
        <%= f.text_field :postcode, class: 't-postcode form__input-container--medium' %>
      </div>
    <% end %>

    <%= f.form_row :travel_distance do %>
      <div>
        <%= f.errors_for :travel_distance %>
        <%= f.label :travel_distance, t('questionnaire.adviser.geographical_coverage.travel_distance'), class: 'form__label-heading' %>
        <%= f.select :travel_distance, TravelDistance.all, { include_blank: true }, { class: 't-travel-distance' } %>
      </div>
    <% end %>
  </fieldset>
</section>

<hr>

<section>
  <%= heading_tag(t('questionnaire.adviser.advisers_qualifications.heading'), level: 2, class: 'heading-small') %>
  <p class="l-questionnaire__section-description"><%= t('questionnaire.adviser.advisers_qualifications.description') %></p>

  <fieldset class="form__group">
    <legend class="l-questionnaire__legend"><%= t('questionnaire.adviser.accreditations.heading') %></legend>
    <p><%= t('questionnaire.adviser.accreditations.description') %></p>

    <%= f.form_row :accreditation_ids do %>
      <%= f.errors_for :accreditation_ids %>

      <%= f.collection_check_boxes(:accreditation_ids, Accreditation.all, :id, :name) do |b| %>
        <div class="form__group-item">
          <%= b.label { b.check_box(class: 'form__group-input t-accreditation-id') + b.text } %>
        </div>
      <% end %>
    <% end %>
  </fieldset>

  <fieldset class="form__group">
    <legend class="l-questionnaire__legend"><%= t('questionnaire.adviser.qualifications.heading') %></legend>
    <p><%= t('questionnaire.adviser.qualifications.description') %></p>

    <%= f.form_row :qualification_ids do %>
      <%= f.errors_for :qualification_ids %>

      <%= f.collection_check_boxes(:qualification_ids, Qualification.all, :id, :name) do |b| %>
        <div class="form__group-item">
          <%= b.label { b.check_box(class: 'form__group-input t-qualification-id') + b.text } %>
        </div>
      <% end %>
    <% end %>
  </fieldset>

  <fieldset class="form__group">
    <legend class="l-questionnaire__legend"><%= t('questionnaire.adviser.professional_standing.heading') %></legend>
    <p><%= t('questionnaire.adviser.professional_standing.description') %></p>

    <%= f.form_row :professional_standing_ids do %>
      <%= f.errors_for :professional_standing_ids %>
      <%= f.collection_check_boxes(:professional_standing_ids, ProfessionalStanding.all, :id, :name) do |b| %>
        <div class="form__group-item">
          <%= b.label { b.check_box(class: 'form__group-input') + b.text } %>
        </div>
      <% end %>
    <% end %>
  </fieldset>

  <fieldset class="form__group">
    <legend class="l-questionnaire__legend"><%= t('questionnaire.adviser.professional_body.heading') %></legend>
    <p><%= t('questionnaire.adviser.professional_body.description') %></p>

    <%= f.form_row :professional_body_ids do %>
      <%= f.errors_for :professional_body_ids %>

      <%= f.collection_check_boxes(:professional_body_ids, ProfessionalBody.all, :id, :name) do |b| %>
        <div class="form__group-item">
          <%= b.label { b.check_box(class: 'form__group-input') + b.text } %>
        </div>
      <% end %>
    <% end %>
  </fieldset>
</section>

<div class="l-self-service-action-row">
  <%= link_to t('self_service.cancel_button'), :back, class: 'l-self-service-action-row__cancel' %>
  <% if f.object.persisted? %>
    <%= f.submit t('self_service.adviser_edit.submit_button'), class: 'button button--primary t-submit' %>
  <% else %>
    <%= f.submit t('self_service.adviser_new.submit_button'), class: 'button button--primary t-submit' %>
  <% end %>
</div>
