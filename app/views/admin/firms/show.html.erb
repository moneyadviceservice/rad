<h1>
  <%= @firm.registered_name %>
  <small>FCA Number <%= @firm.fca_number %></small>
</h1>

<div class="panel panel-default">
  <div class="panel-body">
    <p>
      <strong>Principal:</strong>
      <%= link_to "#{@firm.principal.first_name} #{@firm.principal.last_name}", admin_principal_path(@firm.principal) %>
      <ul>
        <li><strong>Principal Email:</strong> <%= mail_to @firm.principal.email_address %></li>
        <li><strong>Principal Phone:</strong> <%= @firm.principal.telephone_number %></li>
      </ul>
    </p>
    <p>
      <strong>FCA Number:</strong> <%= @firm.fca_number %>
    </p>
    <p>
      <strong>Registered Name:</strong> <%= @firm.registered_name %>
    </p>
    <p>
      <strong>Website Address:</strong> <%= link_to @firm.website_address %>
    </p>
    <p>
      <strong>Added:</strong> <%= @firm.created_at.to_s(:long) %>
    </p>
  </div>
</div>


<%= render 'admin/shared/sign_in_as_principal', principal: @firm.principal %>

<% if @firm.subsidiary? %>
  <h2>Parent Firm</h2>
  <p>
    <%= @firm.registered_name %> is a subsidiary of
    <%= link_to @firm.parent.registered_name, admin_firm_path(@firm.parent) %>.
  </p>
<% end %>

<% if @firm.subsidiaries.present? %>
  <h2>Subsidiaries</h2>
  <p>
    <%= @firm.registered_name %> has the following subsidiaries:
  </p>

  <ul>
    <% @firm.subsidiaries.each do |subsidiary| %>
      <li><%= link_to subsidiary.registered_name, admin_firm_path(subsidiary) %></li>
    <% end %>
  </ul>
<% end %>

<h2>Advisers</h2>
<% if @firm.advisers.present? %>
  <p>
    <%= @firm.registered_name %> has the following advisers:
  </p>

  <ul>
    <% @firm.advisers.each do |adviser| %>
      <li class='t-adviser'><%= link_to adviser.name, admin_adviser_path(adviser) %>, added <%= adviser.created_at.to_s(:short) %></li>
    <% end %>
  </ul>

  <%= button_to 'Move advisers', new_admin_move_adviser_path, class: 't-move-advisers', method: :get, form_class: 'firm__move-advisers' %>
<% else %>
  <p>No advisers registered.</p>
<% end %>

<%= link_to 'New adviser (without reference number)', new_admin_firm_adviser_path(@firm), class: 'btn btn-success t-new-adviser', method: :get %>

<% if @firm.registered? %>
  <h2>Questionnaire Responses</h2>
  <ul>
    <% [
         :in_person_advice_methods,
         :other_advice_methods,
         :free_initial_meeting,
         :initial_meeting_duration,
         :initial_advice_fee_structures,
         :ongoing_advice_fee_structures,
         :allowed_payment_methods,
         :minimum_fixed_fee,
         *t('self_service.firm_form.business_split_options').keys,
         :investment_sizes
       ].each do |attribute|
    %>
      <li>
        <strong><%= attribute.to_s.humanize %>:</strong>
        <%= render_questionnaire_response(@firm, attribute) %>
      </li>
    <% end %>
  </ul>
<% end %>
